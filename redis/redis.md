## Q&A

**Q**: redis为何要设置过期时间？

A: 1. 节省空间 2.一致性兜底

> 为什么必须要有过期时间？首先对于缓存来说，当它的命中率越高的时候，我们的系统性能也就越好。如果某个缓存项没有过期时间，而它命中的概率又很低，这就是在浪费缓存的空间。而如果有了过期时间，且在某个缓存项经常被命中的情况下，我们<font color=red>可以在每次命中的时候都刷新一下它的过期时间</font>，这样也就保证了热点数据会一直在缓存中存在，从而保证了缓存的命中率，提高了系统的性能。
>
> 设置过期时间还有一个好处，就是当数据库跟缓存出现数据不一致的情况时，这个可以作为一个最后的兜底手段。也就是说，当数据确实出现不一致的情况时，过期时间可以保证只有在出现不一致的时间点到缓存过期这段时间之内，数据库跟缓存的数据是不一致的，因此也保证了数据的最终一致性。

[聊聊数据库与缓存数据一致性问题](https://zhuanlan.zhihu.com/p/82799322)



**Q**: redis 过期策略？

A: 



**Q**: 数据库变更时一致性问题？

A: [聊聊数据库与缓存数据一致性问题](https://zhuanlan.zhihu.com/p/82799322)分析的非常好，除了先写数据库再删redis之外，其它方案均无法避免并发线程交叉的覆盖的问题
